<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Magic Engine</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", sans-serif; margin: 24px; line-height: 1.6; }
    code { background: #f4f4f4; padding: 2px 6px; border-radius: 6px; }
    .box { border: 1px solid #e5e5e5; border-radius: 12px; padding: 16px; margin: 16px 0; }
    a { word-break: break-all; }
    h1 { margin: 0 0 12px; }
    h2 { margin: 20px 0 8px; font-size: 1.1rem; }
  </style>
</head>
<body>
  <h1>Magic Engine</h1>
  <div class="box" id="nipBox">
    <h2>nip.io Link</h2>
    <p id="nipText" class="muted">Detecting…</p>
    <p id="nipLinkWrap" style="display:none;">
      <a id="nipLink" href="#" rel="noopener noreferrer"></a>
    </p>
  </div>

  <div class="box">
    <h2>nip.io とは</h2>
    <p>
      <strong>nip.io</strong> は、ドメイン名の中に IP アドレスを埋め込むだけで、
      その IP に解決されるホスト名を簡単に作れるサービスです。
      たとえば <code>127.0.0.1.nip.io</code> は <code>127.0.0.1</code> に解決されます。
      <br />
      ローカル開発や一時的な検証で「DNS設定なしでそれっぽいホスト名」を使いたいときに便利です。
    </p>

    <h2>What is nip.io?</h2>
    <p>
      <strong>nip.io</strong> is a wildcard DNS service that lets you embed an IP address into a hostname,
      so the hostname automatically resolves to that IP—no DNS configuration needed.
      For example, <code>127.0.0.1.nip.io</code> resolves to <code>127.0.0.1</code>.
      <br />
      It’s handy for local development and quick testing when you want a “realistic” hostname without managing DNS.
    </p>
  </div>

  <script>
    // The following code isn't directly related to this challenge
    (function () {
      const host = window.location.hostname === "localhost" ? "127.0.0.1" : window.location.hostname;
      const port = window.location.port; // "" if default
      const scheme = window.location.protocol; // http: / https:
      const nipText = document.getElementById("nipText");
      const nipLinkWrap = document.getElementById("nipLinkWrap");
      const nipLink = document.getElementById("nipLink");

      // Simple IPv4 check (good enough for this use)
      const isIPv4 = /^(?:\d{1,3}\.){3}\d{1,3}$/.test(host);

      // Only build nip.io link when user accessed by IP directly
      if (isIPv4) {
        const nipHost = host + ".nip.io";
        const url = scheme + "//" + nipHost + (port ? (":" + port) : "") + "/";

        nipText.textContent =
          "You accessed this origin by IP address. Here is the equivalent nip.io URL:";
        nipLink.textContent = url;
        nipLink.href = url;
        nipLinkWrap.style.display = "block";
      } else {
        nipText.textContent =
          "You are not accessing by a raw IP address, so there is no automatic nip.io link to suggest.";
      }
    })();
  </script>
</body>
</html>